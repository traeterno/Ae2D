# Ae2D (Aeterno2D)

## Документация для разработчиков

- [Компиляция и инициализация](#компиляция-и-инициализация)
- [Конфигурация](#файл-конфигурации)
- [Написание интерфейса](#интерфейс)

## Компиляция и инициализация
Движок официально поддерживается на Linux и Windows, macOS не тестировался. Для сборки нужно установить GLFW и в папке проекта запустить команду `cargo build --release`.

Для запуска движку требуются как минимум два файла:
- Файл конфигурации;
- Файл интерфейса.

### Файл конфигурации
Настройки движка прописаны в формате ***JSON*** в файле `res/gloabl/config.json`.

Настройки поделены на два раздела:
- `main` - Обязательные переменные;
- `custom` - Переменные, имеющие изначальное значение и доступные в [скриптах](#скрипты).

### Обязательные переменные

Обязательные переменные предопределены движком:
- `title` - Заголовок окна. Значением может быть любая строка;
- `size` - Изначальные размеры окна. Должен быть определён массивом двух чисел в формате `[ширина, высота]`;
- `vsync` - Вертикальная синхронизация. Если движок работает в полноэкранном режиме, то любое логическое значение изменяется на `true`;
- `uiSize` - Базовое разрешение интерфейса, требуется для масштабирования. Определяется в том же формате, что и размеры окна;
- `fullscreen` - Полноэкранный режим. Любое логическое значение;
- `uiPath` - Путь до [начального файла интерфейса](#интерфейс).

#### Пример:
```json
{
	"main": {
		"title": "Ae2D",
		"size": [1280, 720],
		"vsync": true,
		"uiSize": [1920, 1080],
		"fullscreen": false,
		"uiPath": "res/ui/mainMenu.json"
	},
	"custom": {}
}
```

## Интерфейс

Интерфейс пишется в формате ***JSON*** и поделён на пронумерованные объекты, которые содержат в себе информацию. ***Нумерация должна начинаться с 0 и идти без пропусков значений.*** Пример:

```json
{
	"0": {
		"name": "title",
		"script": "res/scripts/ui/mainMenu/title.lua",
		"image": "res/tex/ui/logo.png",
		"anim": "res/anims/ui/logo.json",
		"text": {
			"font": "res/global/font.json",
			"size": 32,
			"text": "Ae2D"
		}
	}
}
```

Список параметров:
- `name` - Имя объекта. Желательно писать на английском, кириллица не проверялась на работоспособность;
- `script` - Путь до [скрипта](#скрипты-интерфейса) объекта. Скрипт написан на Lua.
- `image`/`anim` - Путь до изображения/[аниматора](#аниматоры). Изображения поддерживаются в формате ***PNG***, аниматоры - ***JSON***;
- `text` - Настройки текста для объекта:
- - `font` - Путь до шрифта. Должен быть в формате ***JSON***, на данный момент нет инструментов, которые позволяют переводить ***TTF*** напрямую в ***JSON***, поэтому доступен только один шрифт - *Envell*;
- - `size` - Высота текста в пикселях;
- - `text` - Изначальная строка, которая будет отображена.

## Аниматоры
Аниматор - файл, определяющий покадровые анимации, построенные на основе текстуры. Имеет формат ***JSON + PNG***. Пример:
```json
{
	"texture": "res/tex/test.png",
	"size": [32, 32],
	"anims": {
		"main": {
			"repeat": 0,
			"frames": [
				{ "id": 0, "duration": 0.5 },
				{ "id": 1, "duration": 0.5 }
			]
		}
	}
}
```

Построение аниматора:
- `texture` - Путь до текстуры аниматора;
- `size` - Размер кадра. Определяется, как [размеры окна](#файл-конфигурации);
- `anims` - Список анимаций. У каждой должно быть название. Желательно использовать английский язык, кириллица не была проверена на работоспособность.

Построение анимации:
- `repeat` - Количество повторений анимации. Если установлено на 0, то анимация будет повторяться бесконечно;
- `frames` - Упорядоченный список кадров:
- - `id` - Номер кадра, начиная с 0. Отсчёт идёт слева-направо сверху-вниз, то есть кадр №0 - левый верхний, №1 - правый верхний, №2 - нижний левый и т.д.;
- - `duration` - Длительность показа кадра. Измеряется в секундах, может быть дробное значение.

## Скрипты

### Скрипты интерфейса

### Скрипты существ